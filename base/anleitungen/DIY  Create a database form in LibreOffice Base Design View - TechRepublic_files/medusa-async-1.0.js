define(["jquery","version!fly/managers/tracking","version!fly/managers/debug","version!fly/utils/url-helper","version!components/load-async"],function(e,t,n,r){var i=n.get("medusaAsync");e.widget("tr.medusaAsync",e.tr.loadAsync,{options:{url:null,data:{}},_setup:function(){this._super();var e=this.options;r.getParam("medusaDebug")&&(e.data.medusaDebug=r.getParam("medusaDebug"))},_handleSuccess:function(n){var r=this.options,s=this;i.log("_handleSuccess: ","response success?",s.id,": ",n.success),i.log("_handleSuccess: ","response data - ",s.id,": ",n);if(n.success&&n.html){this.$element.replaceWith(n.html);var o=/id="medusa"/;if(o.test(n.html)){i.log("fire impression");var u=t.getDw(),a=t.getOmniture();u.trackEvent({mapp:"medusa_app",comptyp:"spot",comp:"ucwc",riaevent:"impression",objtyp:"medusa",objnm:"",s7:""}),e("#medusa a").click(function(t){u.trackEvent({mapp:"medusa_app",comptyp:"spot",comp:"ucwc",riaevent:"click",objtyp:"url",objnm:e(this).attr("href"),s6:e(this).text(),s7:""}),a.trackEvent("moduleClick",{moduleInfo:"Medusa"})})}}else this._handleFailure(n)}})})